{"remainingRequest":"C:\\xampp\\htdocs\\pempleos\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\pempleos\\client\\src\\components\\posts.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\pempleos\\client\\src\\components\\posts.vue","mtime":1541595956462},{"path":"C:\\xampp\\htdocs\\pempleos\\client\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1541050042000},{"path":"C:\\xampp\\htdocs\\pempleos\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1541132801404},{"path":"C:\\xampp\\htdocs\\pempleos\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport axios from 'axios';\r\nclass trabajo{\r\n    constructor(compañia, logo, posicion, id_categoria, ubicacion, url, tipo,descripcion){\r\n        this.compañia = compañia;\r\n        this.logo = logo;\r\n        this.posicion = posicion;\r\n        this.id_categoria = id_categoria;\r\n        this.ubicacion = ubicacion;\r\n        this.url = url;\r\n        this.tipo = tipo;\r\n        this.descripcion = descripcion;\r\n    }\r\n}\r\nexport default {\r\n    name: 'posts',\r\n    data: () => ({\r\n         title: \"Image Upload\",\r\n        dialog: false,\r\n        works: new trabajo(),\r\n    imageName: '',\r\n    logoimg: null,\r\n    imageUrl: '',\r\n    formdata: {},\r\n\t    imageFile: '',\r\n      valid: true,\r\n      radioGroup: 1,\r\n      name: '',\r\n      nameRules: [\r\n        v => !!v || 'este campo es obligatorio',\r\n        v => (v && v.length <= 10) || 'Name must be less than 10 characters'\r\n      ],\r\n      email: '',\r\n      emailRules: [\r\n        v => !!v || 'E-mail is required',\r\n        v => /.+@.+/.test(v) || 'E-mail must be valid'\r\n      ],\r\n      select: null,\r\n      items: [],\r\n      checkbox: false\r\n    }),\r\n    created(){\r\n        this.mostrarCategorias();\r\n    },\r\n    methods: {\r\n      submit () {\r\n        if (this.$refs.form.validate()) {\r\n          // Native form submission is not yet supported\r\n          console.log(this.works);\r\n          axios.post('http://localhost/pempleos/empleo/create', {\r\n            compañia: this.works.compañia,\r\n            tipo: this.works.tipo,\r\n            logo: this.logoimg,\r\n            url: this.works.url,\r\n            posicion: this.works.posicion,\r\n            ubicacion: this.works.ubicacion,\r\n            id_categoria: this.works.id_categoria,\r\n            descripcion: this.works.descripcion,\r\n            email: this.$cookies.get('email'),\r\n            idUsuario: this.$session.get('id')\r\n          }).then(res=>{\r\n            if(res.data[0].Status){\r\n              this.$router.push('/');\r\n            }\r\n          }).catch(err=>console.log(err));\r\n        }\r\n      },\r\n      clear () {\r\n        this.$refs.form.reset()\r\n      },\r\n      mostrarCategorias(){\r\n            axios.get('http://localhost/pempleos/categoria/listar').then(response=> {\r\n              for(let i = 0;i<response.data[0].length;i++){\r\n                console.log(response.data[0][i]);\r\n                  this.items.push({value:response.data[0][i].id_categoria, text: response.data[0][i].nombre});\r\n              }\r\n            }).catch(err=>console.error(err));\r\n        },\r\n      pickFile () {\r\n            this.$refs.image.click()\r\n    },\r\n    \tonFilePicked (e) {\r\n\t\t\tconst files = e.target.files\r\n\t\t\tif(files[0] !== undefined) {\r\n\t\t\t\tthis.imageName = files[0].name\r\n\t\t\t\tif(this.imageName.lastIndexOf('.') <= 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconst fr = new FileReader ()\r\n\t\t\t\tfr.readAsDataURL(files[0])\r\n\t\t\t\tfr.addEventListener('load', () => {\r\n\t\t\t\t\tthis.imageUrl = fr.result\r\n                    this.imageFile = files[0] // this is an image file that can be sent to server...       \r\n                   this.formdata = new FormData();\r\n                   this.formdata.append('file', this.imageFile);\r\n          axios.post('http://localhost/pempleos/image/do_upload',this.formdata)\r\n          .then(res=> {\r\n            this.logoimg = res.data[0].image\r\n        })\r\n          .catch(err=> console.log(err));\r\n      \r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.imageName = ''\r\n\t\t\t\tthis.imageFile = ''\r\n\t\t\t\tthis.imageUrl = ''\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n    \r\n}\r\n",{"version":3,"sources":["posts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"posts.vue","sourceRoot":"src\\components","sourcesContent":["<template>\r\n   <v-container>\r\n      <div class=\"text-xs-left\">\r\n    <v-btn fab dark small color=\"primary\" @click=\"$router.go(-1)\">\r\n      <v-icon dark>arrow_back</v-icon>\r\n    </v-btn>\r\n             </div>\r\n       <v-layout xs8 md8 column>\r\n           <h2 class=\"display-3 text-xs-center\">Postear Trabajo</h2>\r\n       <v-divider></v-divider>\r\n       <!-- Imagenes -->\r\n       <v-flex xs12 class=\"text-xs-center text-sm-center text-md-center text-lg-center\">\r\n\t\t\t\t\t<img :src=\"imageUrl\" height=\"150\" v-if=\"imageUrl\"/>\r\n\t\t\t\t\t<v-text-field label=\"Imagen de logo\" @click='pickFile' v-model='imageName' prepend-icon='attach_file'></v-text-field>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tstyle=\"display: none\"\r\n\t\t\t\t\t\tref=\"image\"\r\n\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t@change=\"onFilePicked\"\r\n\t\t\t\t\t>\r\n\t\t\t\t</v-flex>\r\n\r\n       <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n            <v-select\r\n      v-model=\"works.id_categoria\"\r\n      :items=\"items\"\r\n      item-value=\"value\"\r\n      :rules=\"[v => !!v || 'Item is required']\"\r\n      label=\"Categorias\"\r\n      required\r\n    ></v-select>\r\n    <v-text-field\r\n      v-model=\"works.compañia\"\r\n      :rules=\"nameRules\"\r\n      label=\"Compañia\"\r\n      required\r\n    ></v-text-field>\r\n   <v-radio-group row v-model=\"works.tipo\">\r\n      <v-radio\r\n        v-for=\"n in ['Part-Time', 'Full-Time', 'Freelance']\"\r\n        :key=\"n\"\r\n        :label=\"`${n}`\"\r\n        :value=\"n\"\r\n      ></v-radio>\r\n    </v-radio-group>\r\n    \r\n     <v-text-field\r\n      v-model=\"works.url\"\r\n      :rules=\"nameRules\"\r\n      label=\"url\"\r\n    ></v-text-field>\r\n    <v-text-field\r\n      v-model=\"works.posicion\"\r\n      label=\"Posicion\"\r\n      required\r\n    ></v-text-field>\r\n    <v-text-field\r\n      v-model=\"works.ubicacion\"\r\n      label=\"ubicacion\"\r\n      required\r\n    ></v-text-field>\r\n    <v-textarea\r\n          name=\"input-7-1\"\r\n          v-model=\"works.descripcion\"\r\n          label=\"Descripcion\"\r\n          value=\"\"\r\n          hint=\"Hint text\"\r\n          :counter=\"500\"\r\n        ></v-textarea>\r\n\r\n    <v-btn\r\n      :disabled=\"!valid\"\r\n      @click=\"submit\"\r\n    >\r\n      submit\r\n    </v-btn>\r\n    <v-btn @click=\"clear\">clear</v-btn>\r\n  </v-form>\r\n       </v-layout>\r\n   </v-container>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nclass trabajo{\r\n    constructor(compañia, logo, posicion, id_categoria, ubicacion, url, tipo,descripcion){\r\n        this.compañia = compañia;\r\n        this.logo = logo;\r\n        this.posicion = posicion;\r\n        this.id_categoria = id_categoria;\r\n        this.ubicacion = ubicacion;\r\n        this.url = url;\r\n        this.tipo = tipo;\r\n        this.descripcion = descripcion;\r\n    }\r\n}\r\nexport default {\r\n    name: 'posts',\r\n    data: () => ({\r\n         title: \"Image Upload\",\r\n        dialog: false,\r\n        works: new trabajo(),\r\n    imageName: '',\r\n    logoimg: null,\r\n    imageUrl: '',\r\n    formdata: {},\r\n\t    imageFile: '',\r\n      valid: true,\r\n      radioGroup: 1,\r\n      name: '',\r\n      nameRules: [\r\n        v => !!v || 'este campo es obligatorio',\r\n        v => (v && v.length <= 10) || 'Name must be less than 10 characters'\r\n      ],\r\n      email: '',\r\n      emailRules: [\r\n        v => !!v || 'E-mail is required',\r\n        v => /.+@.+/.test(v) || 'E-mail must be valid'\r\n      ],\r\n      select: null,\r\n      items: [],\r\n      checkbox: false\r\n    }),\r\n    created(){\r\n        this.mostrarCategorias();\r\n    },\r\n    methods: {\r\n      submit () {\r\n        if (this.$refs.form.validate()) {\r\n          // Native form submission is not yet supported\r\n          console.log(this.works);\r\n          axios.post('http://localhost/pempleos/empleo/create', {\r\n            compañia: this.works.compañia,\r\n            tipo: this.works.tipo,\r\n            logo: this.logoimg,\r\n            url: this.works.url,\r\n            posicion: this.works.posicion,\r\n            ubicacion: this.works.ubicacion,\r\n            id_categoria: this.works.id_categoria,\r\n            descripcion: this.works.descripcion,\r\n            email: this.$cookies.get('email'),\r\n            idUsuario: this.$session.get('id')\r\n          }).then(res=>{\r\n            if(res.data[0].Status){\r\n              this.$router.push('/');\r\n            }\r\n          }).catch(err=>console.log(err));\r\n        }\r\n      },\r\n      clear () {\r\n        this.$refs.form.reset()\r\n      },\r\n      mostrarCategorias(){\r\n            axios.get('http://localhost/pempleos/categoria/listar').then(response=> {\r\n              for(let i = 0;i<response.data[0].length;i++){\r\n                console.log(response.data[0][i]);\r\n                  this.items.push({value:response.data[0][i].id_categoria, text: response.data[0][i].nombre});\r\n              }\r\n            }).catch(err=>console.error(err));\r\n        },\r\n      pickFile () {\r\n            this.$refs.image.click()\r\n    },\r\n    \tonFilePicked (e) {\r\n\t\t\tconst files = e.target.files\r\n\t\t\tif(files[0] !== undefined) {\r\n\t\t\t\tthis.imageName = files[0].name\r\n\t\t\t\tif(this.imageName.lastIndexOf('.') <= 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconst fr = new FileReader ()\r\n\t\t\t\tfr.readAsDataURL(files[0])\r\n\t\t\t\tfr.addEventListener('load', () => {\r\n\t\t\t\t\tthis.imageUrl = fr.result\r\n                    this.imageFile = files[0] // this is an image file that can be sent to server...       \r\n                   this.formdata = new FormData();\r\n                   this.formdata.append('file', this.imageFile);\r\n          axios.post('http://localhost/pempleos/image/do_upload',this.formdata)\r\n          .then(res=> {\r\n            this.logoimg = res.data[0].image\r\n        })\r\n          .catch(err=> console.log(err));\r\n      \r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.imageName = ''\r\n\t\t\t\tthis.imageFile = ''\r\n\t\t\t\tthis.imageUrl = ''\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n    \r\n}\r\n</script>\r\n"]}]}